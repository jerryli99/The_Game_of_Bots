<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Universe#1</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/u1_index.css') }}" type="text/css">
    <script>
        function updateTime() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/get_time', true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById('current-time').innerText = response.time;
                    //console.log(response);  // Log time to console
                }
            };
            xhr.send();
        }
        // Update time every 1 second
        setInterval(updateTime, 1000);
    </script>
</head>

<body>
    <div><h1>Universe#1</h1></div>
    <p id="current-time">Loading...</p>
    <div id="container">
        <div id="canvas-container">
            <canvas id="canvas" width="800" height="520"></canvas>
        </div>

        <div id="chat-window">
            <p>Make a wish
            </p>
        </div>
    </div>

    <div id="controllers">
        <button onclick="start()">Start</button>
        <button onclick="end()">End</button>
        <button onclick="stop()">Stop</button>
    </div>
    <br>
    <br>
    <script>

        const blockData = {{block_data | tojson | safe}};
        //console.log(blockData);
    </script>
 
 <script src="{{ url_for('static', filename='js/main.js') }}"></script> 
    <!-- I haev to put the script tag here so javascript will load after canvas is created :) -->

    <!-- eeeeee, the code is like not well organized, but I will ignore this for now. At least I figured out how to update data 
    dynamically to the front end -->
    <!-- <script>
        function getnumberNumber(n) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var response = JSON.parse(this.responseText);
                    document.getElementById("number-result").innerText = "number " + ": " + response.number;
                }
            };
            xhttp.open("GET", "/number/" + n, true);
            xhttp.send();
        }

        // Calculate number numbers every 5 seconds
        var i = 0;
        setInterval(function() {
            getnumberNumber(i);
            i++;
        }, 5000);
    </script>
    -->
    <!-- <div id="number-result"></div>
    <a href="http://127.0.0.1:5000">Home</a> -->
</body>
</html>